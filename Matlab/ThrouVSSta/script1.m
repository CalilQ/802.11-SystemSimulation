clc
clear all
close all
%% General

offeData = 0.5;
simTime = 1.1;

%% With BA and Aggregation

nStasBA = [1:15]';
thrBA = [0.515988 0.475575 0.530536 0.546736 0.479758 0.528566 0.465785 0.49475 0.532369 0.527809 ;... % 1
         0.867896 1.0159   0.951403 1.00772  1.0021   0.962609 0.951958 1.11114 1.04173  1.08787  ;... % 2
         1.46226  1.47953  1.4352   1.57933  1.63953  1.49149  1.48394  1.5392  1.50013  1.44795  ;... % 3
         1.98742  2.0309   1.8877   1.95471  1.77487  1.9557   2.16689  2.12446 2.00797  2.15944  ;... % 4
         2.52798  2.46796  2.53471  2.62974  2.41167  2.61996  2.6279   2.35981 2.52835  2.55115  ;... % 5
         3.01083  3.18642  3.067    3.22741  3.12212  3.03983  3.05077  3.04394 2.99185  2.97937  ;... % 6
         3.49962  3.41533  3.42793  3.68793  3.44395  3.66779  3.55584  3.27551 3.4075   3.61805  ;... % 7
         3.3389   3.90797  4.23092  3.996    3.93063  3.79561  3.82399  4.0159  4.09547  3.80776  ;... % 8
         3.8872   4.21599  4.53992  4.0998   4.27509  4.06389  4.4277   4.18198 4.38558  4.15583  ;... % 9
         4.04253  4.74237  4.75599  4.5435   4.42159  4.47989  4.5061   4.42298 4.41999  4.30303  ;... % 10
         3.91885  4.65953  4.78356  4.53108  4.54574  4.72609  4.63106  4.65184 4.38233  4.58606  ;... % 11
         4.08794  4.65792  4.81519  4.23513  4.69185  4.63193  4.56385  4.59977 4.54693  4.65813  ;... % 12
         4.21092  4.76954  4.74127  4.29591  4.51456  4.55996  4.61594  4.48382 4.58642  4.39178  ;... % 13
         4.09593  4.59795  4.78168  4.27918  4.56321  4.62235  4.60347  4.3999  4.5674   4.35106  ;... % 14
         4.19597  4.71173  4.71865  4.55767  4.67476  4.50911  4.44377  4.51997 4.42158  4.80061  ];   % 15
     
mThrBA = mean(thrBA,2)./nStasBA;
effBA = 100*mThrBA./(simTime*offeData);

%% Without BA and Aggregation

nStas = [1:15]';
%          1        2       3         4       5         6       7         8        9        0
thr = [0.45598  0.49902  0.475762 0.467119 0.424739 0.467287 0.428468 0.494538 0.471965 0.503984 ;... % 1
       0.969783 1.04405  1.04204  1.08483  0.991031 1.06727  0.947977 1.00125  0.999581 0.969017 ;... % 2
       1.50299  1.53905  1.47238  1.49059  1.52226  1.56688  1.53998  1.67306  1.61786  1.64787  ;... % 3
       1.83357  1.94332  1.80326  2.20153  1.95264  2.01545  1.7518   1.94454  2.00241  1.85552  ;... % 4
       2.57443  2.38397  2.09974  2.70357  2.45381  2.45574  2.41139  2.392    2.38738  2.50395  ;... % 5
       3.18775  2.9751   3.10798  3.05995  2.97999  3.10638  3.03589  2.96399  2.73939  2.97969  ;... % 6
       3.57527  3.81997  3.392    3.65114  3.4897   3.47816  3.28394  3.49593  3.56797  3.29017  ;... % 7
       3.11993  3.83949  3.91544  3.08297  3.19136  3.47995  3.2439   3.8584   3.58309  3.44396  ;... % 8
       3.64365  3.9759   4.29439  3.85582  3.91598  4.12398  3.94779  3.86393  4.08732  3.54684  ;... % 9
       3.38745  4.1839   4.35973  3.91418  3.3629   4.08393  3.99598  4.07312  3.4345   3.44268  ;... % 10
       3.35582  4.15878  4.38664  4.03889  4.03558  4.23598  4.17055  4.05197  3.98763  4.25702  ;... % 11
       3.78242  4.38673  4.33562  3.86381  3.85999  4.30389  3.58397  4.09157  4.10747  3.915    ;... % 12
       3.664    4.19971  4.42797  3.83993  4.13783  4.1143   4.10361  3.96545  4.11128  4.02305  ;... % 13
       3.38294  4.30797  4.29199  3.78784  4.04997  4.42392  4.16324  4.13113  4.0538   4.14577  ;... % 14
       4.07978  4.45546  4.42213  4.21592  4.03445  4.16395  3.55598  4.18799  4.03949  4.03087  ];   % 15
     
mThr = mean(thr,2)./nStas;
eff = 100*mThr./(simTime*offeData);

%% Without TXOP

nStasNT = [1:15]';
%           1         2        3        4        5        6        7       8         9        0
thrNT = [0.51179  0.394866 0.470503 0.544695 0.468133 0.537167 0.485594 0.487901 0.485283 0.571902 ;... % 1
         0.942246 0.876905 0.899849 1.00984  0.913384 1.05754  1.02398  0.925451 0.983214 1.00777  ;... % 2
         1.38608  1.40718  1.428    1.79535  1.5079   1.53006  1.5195   1.69359  1.52712  1.71051  ;... % 3
         1.92279  2.08309  1.94346  2.10789  1.88735  1.9719   1.77194  2.01618  2.12247  1.92384  ;... % 4
         2.31599  2.22707  2.38795  2.64797  2.41992  2.66384  2.47865  2.51178  2.84785  2.53592  ;... % 5
         3.05591  2.97545  2.86261  3.09435  3.12232  3.05056  3.1552   3.03564  3.25043  2.97199  ;... % 6
         3.26728  3.33168  3.4637   3.77977  3.36613  3.58334  3.79407  3.53192  3.73132  3.43071  ;... % 7
         2.80388  3.884    3.87961  3.35891  3.6714   3.84384  3.69974  3.76684  3.79891  3.91999  ;... % 8
         2.99584  4.15594  4.35553  3.40767  3.78395  3.84787  3.70378  3.67998  3.78797  3.81599  ;... % 9
         2.82796  4.13801  4.35881  3.57587  3.60774  3.89133  2.70388  2.16     3.93849  3.81528  ;... % 10
         2.85192  4.19911  4.41538  3.53196  3.78673  3.96394  3.85898  3.62649  3.78794  3.91551  ;... % 11
         2.78773  4.28385  4.30397  3.55195  3.73117  3.99598  3.76722  3.66709  3.60399  3.94781  ;... % 12
         3.01197  3.97188  4.45597  3.59993  3.71037  4.0598   3.77995  3.74398  3.75547  3.804    ;... % 13
         3.016    4.07997  4.38761  3.48763  3.61197  3.88325  3.78361  3.67594  3.80797  3.81584  ;... % 14
         2.91598  4.13199  4.39939  3.65597  3.69938  3.51148  3.79168  3.81599  3.75599  3.93415  ];   % 15
     
mThrNT = mean(thrNT,2)./nStasNT;
effNT = 100*mThrNT./(simTime*offeData);
     
%% Plot

fittedBA = fit(nStasBA,effBA,'cubicinterp');
h1 = plot(fittedBA,'-');
set(h1,'LineWidth',2);
hold on;

fitted = fit(nStas,eff,'cubicinterp');
h2 = plot(fitted,'r-');
set(h2,'LineWidth',2);
hold on;
plot(nStas,eff,'ro','LineWidth',2);

fittedNT = fit(nStasNT,effNT,'cubicinterp');
h3 = plot(fittedNT,'g-');
set(h3,'LineWidth',2);
hold on;
plot(nStasNT,effNT,'go','LineWidth',2);

legend off
axis([1 15 45 100]);
xlabel('Número de estações');
ylabel('Eficiência de Throughput Médio [%]')
legend([h1 h2 h3],'Com agregação','Sem agregação','Sem TXOP');
plot(nStasBA,effBA,'o','LineWidth',2);
plot(nStas,eff,'ro','LineWidth',2);
plot(nStasNT,effNT,'go','LineWidth',2);
grid on;
hold off;
print('-dbmp','thrVSSta');

%% Save data

save data1
